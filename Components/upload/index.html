<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<input type="file" multiple="" id="upload">
	</body>

	<script>
		document.getElementById("upload").onchange = function() {

			var fileBuffer = new FormData();

			Array.from(this.files).forEach((file, index) => fileBuffer.append(index, file));

			var xhr = new XMLHttpRequest();

			//设置请求的类型及url
			xhr.open('post', 'http://localhost:3000/upload', true);

			//发送请求
			xhr.send(fileBuffer);

			xhr.onreadystatechange = () => {
				if (xhr.readyState == 4 && xhr.status == 200) {
					var res = JSON.parse((xhr.responseText).replace(/\\/g, '/').replace(/\/\//g, '/'));
					console.log(res);
				}
			}

		}
	</script>
</html>
